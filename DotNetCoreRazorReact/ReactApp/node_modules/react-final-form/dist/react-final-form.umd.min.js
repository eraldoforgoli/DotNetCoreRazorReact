!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,x,V){"use strict";var w="default"in x?x.default:x;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],0<=t.indexOf(r)||(i[r]=e[r]);return i}function j(e,t,r){var n=e.render,i=e.children,u=e.component,a=C(e,["render","children","component"]);if(u)return x.createElement(u,Object.assign(t,a,{children:i,render:n}));if(n)return n(void 0===i?Object.assign(t,a):Object.assign(t,a,{children:i}));if("function"!=typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+r);return i(Object.assign(t,a))}function k(e,t,r){void 0===r&&(r=function(e,t){return e===t});var n=w.useRef(e);w.useEffect(function(){r(e,n.current)||(t(),n.current=e)})}var B=function(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<r.length;u++){var a=r[u];if(!i(a)||e[a]!==t[a])return!1}return!0},q=function(e){return!(!e||"function"!=typeof e.stopPropagation)},P=x.createContext();function U(e){var t=w.useRef(e);return w.useEffect(function(){t.current=e}),t}function A(t,r,e){e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return r[e]},enumerable:!0})})}var t="6.4.0",D=function(e,t){return A(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},N={"final-form":V.version,"react-final-form":t},z=V.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function r(e){var t,r,n=e.debug,i=e.decorators,u=e.destroyOnUnregister,a=e.form,o=e.initialValues,c=e.initialValuesEqual,l=e.keepDirtyOnReinitialize,s=e.mutators,f=e.onSubmit,d=e.subscription,v=void 0===d?z:d,m=e.validate,p=e.validateOnBlur,b=C(e,["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),g={debug:n,destroyOnUnregister:u,initialValues:o,keepDirtyOnReinitialize:l,mutators:s,onSubmit:f,validate:m,validateOnBlur:p},y=(t=function(){var e=a||V.createForm(g);return e.pauseValidation(),e},(r=w.useRef()).current||(r.current=t()),r.current),h=x.useState(function(){var t={};return y.subscribe(function(e){t=e},v)(),t}),O=h[0],S=h[1],F=U(O);x.useEffect(function(){y.isValidationPaused()&&y.resumeValidation();var e=[y.subscribe(function(e){B(e,F.current)||S(e)},v)].concat(i?i.map(function(e){return e(y)}):[]);return function(){y.pauseValidation(),e.reverse().forEach(function(e){return e()})}},[i]),k(n,function(){y.setConfig("debug",n)}),k(u,function(){y.destroyOnUnregister=!!u}),k(l,function(){y.setConfig("keepDirtyOnReinitialize",l)}),k(o,function(){y.setConfig("initialValues",o)},c||B),k(s,function(){y.setConfig("mutators",s)}),k(f,function(){y.setConfig("onSubmit",f)}),k(m,function(){y.setConfig("validate",m)}),k(p,function(){y.setConfig("validateOnBlur",p)});var E={form:R({},y,{reset:function(e){q(e)?y.reset():y.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),y.submit()}};return D(E,O),x.createElement(P.Provider,{value:y},j(R({},b,{__versions:N}),E,"ReactFinalForm"))}function _(e){var t=x.useContext(P);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function o(e){var t=void 0===e?{}:e,r=t.onChange,n=t.subscription,i=void 0===n?z:n,u=_("useFormState"),a=x.useRef(!0),o=x.useRef(r);o.current=r;var c=x.useState(function(){var t={};return u.subscribe(function(e){t=e},i)(),r&&r(t),t}),l=c[0],s=c[1];x.useEffect(function(){return u.subscribe(function(e){a.current?a.current=!1:(s(e),o.current&&o.current(e))},i)},[]);var f={};return D(f,l),f}function n(e){var t=e.onChange,r=e.subscription,n=C(e,["onChange","subscription"]),i=_("FormSpy"),u=o({onChange:t,subscription:r});if(t)return null;var a={form:R({},i,{reset:function(e){q(e)?i.reset():i.reset(e)}})};return j(R({},n,{},a),u,"FormSpy")}function L(e){return void 0===e?"":e}function I(e){return""===e?void 0:e}var M="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,T=V.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function F(o,e){void 0===e&&(e={});function r(e,t){return O.registerField(o,e,b,{afterSubmit:n,beforeSubmit:function(){var e=S.current,t=e.beforeSubmit,r=e.formatOnBlur,n=e.format,i=void 0===n?L:n;if(r){var u=O.getFieldState(o).value,a=i(u,o);a!==u&&O.change(o,a)}return t&&t()},data:u,defaultValue:a,getValidator:function(){return S.current.validate},initialValue:f,isEqual:function(e,t){return(S.current.isEqual||function(e,t){return e===t})(e,t)},silent:t,validateFields:y})}var n=e.afterSubmit,t=e.allowNull,i=e.component,u=e.data,a=e.defaultValue,c=e.format,l=void 0===c?L:c,s=e.formatOnBlur,f=e.initialValue,d=e.multiple,v=e.parse,m=void 0===v?I:v,p=e.subscription,b=void 0===p?T:p,g=e.type,y=e.validateFields,h=e.value,O=_("useField"),S=U(e),F=x.useRef(!0),E=x.useState(function(){var t={},e=O.destroyOnUnregister;return O.destroyOnUnregister=!1,r(function(e){t=e},!0)(),O.destroyOnUnregister=e,t}),V=E[0],w=E[1];x.useEffect(function(){return r(function(e){F.current?F.current=!1:w(e)},!1)},[o,u,a,f]);var C={onBlur:x.useCallback(function(e){if(V.blur(),s){var t=O.getFieldState(V.name);V.change(l(t.value,V.name))}},[V.name,l,s]),onChange:x.useCallback(function(e){var t=e&&e.target?function(e,t,r,n){if(!n&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(n&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,u=i.type,a=i.value,o=i.checked;switch(u){case"checkbox":if(void 0===r)return!!o;if(o)return Array.isArray(t)?t.concat(r):[r];if(!Array.isArray(t))return t;var c=t.indexOf(r);return c<0?t:t.slice(0,c).concat(t.slice(c+1));case"select-multiple":return function(e){var t=[];if(e)for(var r=0;r<e.length;r++){var n=e[r];n.selected&&t.push(n.value)}return t}(e.target.options);default:return a}}(e,V.value,h,M):e;V.change(m(t,o))},[h,o,m,V.change,V.value,g]),onFocus:x.useCallback(function(e){V.focus()},[])},j={};A(j,V,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"]);var k=R({name:o,get value(){var e=V.value;return s?"input"===i&&(e=L(e)):e=l(e,o),null!==e||t||(e=""),"checkbox"===g||"radio"===g?h:"select"===i&&d?e||[]:e},get checked(){return"checkbox"===g?void 0===h?!!V.value:!(!Array.isArray(V.value)||!~V.value.indexOf(h)):"radio"===g?V.value===h:void 0}},C);return d&&(k.multiple=d),void 0!==g&&(k.type=g),{input:k,meta:j}}e.Field=function(e){var t=e.afterSubmit,r=e.allowNull,n=e.beforeSubmit,i=e.children,u=e.component,a=e.data,o=e.defaultValue,c=e.format,l=e.formatOnBlur,s=e.initialValue,f=e.isEqual,d=e.multiple,v=e.name,m=e.parse,p=e.subscription,b=e.type,g=e.validate,y=e.validateFields,h=e.value,O=C(e,["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),S=F(v,{afterSubmit:t,allowNull:r,beforeSubmit:n,children:i,component:u,data:a,defaultValue:o,format:c,formatOnBlur:l,initialValue:s,isEqual:f,multiple:d,parse:m,subscription:p,type:b,validate:g,validateFields:y,value:h});return"function"==typeof i?i(R({},S,{},O)):"string"==typeof u?x.createElement(u,R({},S.input,{children:i},O)):j(R({children:i,component:u},O),S,"Field("+v+")")},e.Form=r,e.FormSpy=n,e.useField=F,e.useForm=_,e.useFormState=o,e.version=t,e.withTypes=function(){return{Form:r,FormSpy:n}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
